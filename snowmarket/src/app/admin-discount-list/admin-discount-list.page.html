<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title class="">Discount List</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="background">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Discount List</ion-title>
    </ion-toolbar>
  </ion-header>

  <h2>Amount Discount List</h2>

  <div class="columns">
    <div class="column col-12">
      <ngx-table
        [id]="'productDiscountList'"
        [configuration]="productDiscountList"
        [data]="productDiscountData"
        [columns]="productDiscountColumns"
      >
      </ngx-table>
    </div>
  </div>

  <hr />
  <h2>Price Discount List</h2>
  <div class="columns priceDiscountColumn">
    <div class="column col-12">
      <ngx-table
        [id]="'priceDiscountList'"
        [configuration]="priceDiscountList"
        [data]="priceDiscountData"
        [columns]="priceDiscountColumns"
      >
      </ngx-table>
    </div>
  </div>
  <ion-fab slot="fixed" vertical="bottom" horizontal="end">
    <ion-fab-button id="open-modal">
      <ion-icon name="add"></ion-icon>
    </ion-fab-button>
  </ion-fab>

  <ion-modal trigger="open-modal">
    <ng-template>
      <ion-header>
        <ion-toolbar>
          <ion-buttons slot="start">
            <ion-button (click)="cancel()">Cancel</ion-button>
          </ion-buttons>
          <ion-title class="text-center"
            >Adding Product / Price Discount</ion-title
          >
          <ion-buttons slot="end">
            <ion-button method="submit" (click)="confirm()" [strong]="true"
              >Confirm</ion-button
            >
          </ion-buttons>
        </ion-toolbar>
      </ion-header>
      <ion-content class="ion-padding">
        <ion-item>
          <ion-select
            label="Select"
            placeholder="Product / Price"
            [value]="selectDiscount"
            defaultValue="Product"
            (ionChange)="handleChange($event)"
            required
          >
            <ion-select-option value="product_discount"
              >Product</ion-select-option
            >
            <ion-select-option value="price_discount">Price</ion-select-option>
          </ion-select>
        </ion-item>
        <ion-item>
          <ion-label position="stacked">Discount Title*</ion-label>
          <ion-input
            type="text"
            placeholder="Title"
            [(ngModel)]="title"
            [clearInput]="true"
            required
          ></ion-input>
        </ion-item>
        <div *ngIf="selectedProductDiscount">
          <ion-item>
            <ion-label position="stacked">Product ID*</ion-label>
            <ion-input
              type="text"
              placeholder="Product ID"
              [(ngModel)]="product_id"
              [clearInput]="true"
              required
            ></ion-input>
          </ion-item>
          <ion-item>
            <ion-label position="stacked">Brand ID*</ion-label>
            <ion-input
              type="text"
              placeholder="Brand ID"
              [(ngModel)]="brand_id"
              [clearInput]="true"
              required
            ></ion-input>
          </ion-item>
          <ion-item>
            <ion-label position="stacked">Category ID*</ion-label>
            <ion-input
              type="text"
              placeholder="Category ID"
              [(ngModel)]="categories_id"
              [clearInput]="true"
              required
            ></ion-input>
          </ion-item>
          <ion-item id="productQuantity">
            <ion-label position="stacked">Quantity*</ion-label>
            <ion-input
              type="text"
              placeholder="Quantity"
              [(ngModel)]="quantity"
              [clearInput]="true"
              required
            ></ion-input>
          </ion-item>
          <ion-item>
            <ion-label position="stacked">Discount Amount*</ion-label>
            <ion-input
              type="text"
              placeholder="Discount Amount"
              [(ngModel)]="discount_amount"
              [clearInput]="true"
              required
            ></ion-input>
          </ion-item>
        </div>

        <div *ngIf="!selectedProductDiscount">
          <ion-item>
            <ion-label position="stacked">Total*</ion-label>
            <ion-input
              type="text"
              placeholder="Total"
              [(ngModel)]="total_price"
              [clearInput]="true"
              required
            ></ion-input>
          </ion-item>
          <ion-item>
            <ion-label position="stacked">Discount Rate*</ion-label>
            <ion-input
              type="text"
              placeholder="Discount Rate"
              [(ngModel)]="discount_rate"
              [clearInput]="true"
              required
            ></ion-input>
          </ion-item>
        </div>

        <ion-item>
          <ion-label>Start Date*</ion-label>
          <ion-datetime-button datetime="startDay"></ion-datetime-button>
          <ion-modal [keepContentsMounted]="true">
            <ng-template>
              <ion-datetime
                id="startDay"
                presentation="date"
                [showDefaultButtons]="true"
                (ionChange)="startDay($event)"
              ></ion-datetime>
            </ng-template>
          </ion-modal>
        </ion-item>
        <ion-item>
          <ion-label>End Date*</ion-label>
          <ion-datetime-button datetime="endDay"></ion-datetime-button>
          <ion-modal [keepContentsMounted]="true">
            <ng-template>
              <ion-datetime
                id="endDay"
                presentation="date"
                [showDefaultButtons]="true"
                (ionChange)="endDay($event)"
              ></ion-datetime>
            </ng-template>
          </ion-modal>
        </ion-item>
      </ion-content>
    </ng-template>
  </ion-modal>
  <ng-template #productHeaderActionTemplate>
    <div class="search-template">
      <label for="filterHeaderSearch"> Search Product</label>
      <input
        class="form-input"
        id="filterHeaderSearch"
        [value]="selectedProduct"
        (input)="filter('product_id', $event)"
        type="search"
        placeholder="Search"
      />
    </div>
  </ng-template>
  <ng-template #brandHeaderActionTemplate>
    <div class="search-template">
      <label for="filterHeaderSearch"> Search Brand</label>
      <input
        class="form-input"
        id="filterHeaderSearch"
        [value]="selectedBrand"
        (input)="filter('brand_id', $event)"
        type="search"
        placeholder="Search"
      />
    </div>
  </ng-template>
  <ng-template #categoryHeaderActionTemplate>
    <div class="search-template">
      <label for="filterHeaderSearch"> Search Category</label>
      <input
        class="form-input"
        id="filterHeaderSearch"
        [value]="selectedCategory"
        (input)="filter('categories_id', $event)"
        type="search"
        placeholder="Search"
      />
    </div>
  </ng-template>
</ion-content>
